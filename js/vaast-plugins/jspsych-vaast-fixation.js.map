{"version":3,"file":"index.browser.js","sources":["../package.json","../src/index.ts"],"sourcesContent":["{\n  \"name\": \"@jspsych-contrib/plugin-vaast-fixation\",\n  \"version\": \"0.0.1\",\n  \"description\": \"This plugin is meant to be used in a VAAST (Visual Approach and Avoidance by the Self Task) experiment. The VAAST-fixation plugin displays a fixation text that is usually a cross. This plugin is usually called before a vaast-text or vaast-image trial. The participant doesn't respond to the fixation trial.\",\n  \"type\": \"module\",\n  \"main\": \"dist/index.cjs\",\n  \"exports\": {\n    \"import\": \"./dist/index.js\",\n    \"require\": \"./dist/index.cjs\"\n  },\n  \"typings\": \"dist/index.d.ts\",\n  \"unpkg\": \"dist/index.browser.min.js\",\n  \"files\": [\n    \"src\",\n    \"dist\"\n  ],\n  \"source\": \"src/index.ts\",\n  \"scripts\": {\n    \"test\": \"jest\",\n    \"test:watch\": \"npm test -- --watch\",\n    \"tsc\": \"tsc\",\n    \"build\": \"rollup --config\",\n    \"build:watch\": \"npm run build -- --watch\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/jspsych/jspsych-contrib.git\",\n    \"directory\": \"packages/plugin-vaast-fixation\"\n  },\n  \"author\": {\n    \"name\": \"Cédric Batailler\",\n    \"url\": \"https://github.com/cedricbatailler\"\n  },\n  \"license\": \"MIT\",\n  \"bugs\": {\n    \"url\": \"https://github.com/jspsych/jspsych-contrib/issues\"\n  },\n  \"homepage\": \"https://github.com/jspsych/jspsych-contrib/tree/main/packages/plugin-vaast-fixation\",\n  \"peerDependencies\": {\n    \"jspsych\": \">=8.0.0\"\n  },\n  \"devDependencies\": {\n    \"@jspsych/config\": \"^3.2.2\",\n    \"@jspsych/test-utils\": \"^1.0.0\",\n    \"jspsych\": \"^8.0.0\"\n  }\n}\n","import { JsPsych, JsPsychPlugin, ParameterType, TrialType } from \"jspsych\";\n\nimport { version } from \"../package.json\";\n\nconst info = <const>{\n  name: \"vaast-fixation\",\n  version: version,\n  parameters: {\n    /**\n     * The string that is displayed as fixation.\n     */\n    fixation: {\n      type: ParameterType.STRING,\n      default: \"+\",\n    },\n    /**\n     * Font size of the fixation text.\n     */\n    font_size: {\n      type: ParameterType.INT,\n      default: 200,\n    },\n    /**\n     * Minimal duration (in ms).\n     */\n    min_duration: {\n      type: ParameterType.INT,\n      default: 800,\n    },\n    /**\n     * Maximal duration (in ms).\n     */\n    max_duration: {\n      type: ParameterType.INT,\n      default: 2000,\n    },\n    /**\n     * An array with the images displayed as background as function of the position.\n     */\n    background_images: {\n      type: ParameterType.IMAGE,\n      array: true,\n      default: undefined,\n    },\n    /**\n     * The position in the \"background_images\" array which will be used to set the background.\n     */\n    position: {\n      type: ParameterType.INT,\n      default: 3,\n    },\n  },\n  data: {\n    /**\n     * Duration of the fixation trial (in ms).\n     */\n    duration: {\n      type: ParameterType.INT,\n    },\n  },\n  // prettier-ignore\n};\n\ntype Info = typeof info;\n\n/**\n * **vaast-fixation**\n *\n * The VAAST-fixation plugin displays a fixation text that is usually a cross.\n * This plugin is usually called before a vaast-text or vaast-image trial.\n * The participant doesn't respond to the fixation trial.\n *\n * @author Cédric Batailler\n * @see {@link https://github.com/jspsych/jspsych-contrib/packages/plugin-vaast-fixation/README.md}}\n */\nclass VaastFixationPlugin implements JsPsychPlugin<Info> {\n  static info = info;\n\n  constructor(private jsPsych: JsPsych) {}\n\n  trial(display_element: HTMLElement, trial: TrialType<Info>) {\n    // Randomly selecting duration\n    const min_duration = trial.min_duration ?? 800;\n    const max_duration = trial.max_duration ?? 2000;\n    const duration_range = max_duration - min_duration;\n    const trialDuration = Math.random() * duration_range + min_duration;\n\n    // Affichage du stimulus\n    let html_str = \"\";\n\n    const position = trial.position ?? 3;\n\n    html_str +=\n      \"<div style='position: absolute; right: 0; top: 0; width: 100%; height: 100%; background: url(\" +\n      trial.background_images[position] +\n      \") center no-repeat; z-index: -1; background-color: #000000'></div>\";\n    html_str +=\n      \"<div style='height: 100vh; display: flex; justify-content: center; align-items: center; z-index:1; color: #ffffff; font-size: \" +\n      trial.font_size +\n      \"px' id='jspsych-vaast-stim'>\" +\n      trial.fixation +\n      \"</div>\";\n\n    display_element.innerHTML = html_str;\n\n    // function to end trial when it is time\n    const end_trial = () => {\n      // gather the data to store for the trial\n      let trial_data = {\n        duration: trialDuration,\n      };\n\n      // move on to the next trial\n      this.jsPsych.finishTrial(trial_data);\n    };\n\n    // end trial if time limit is set\n    this.jsPsych.pluginAPI.setTimeout(function () {\n      end_trial();\n    }, trialDuration);\n  }\n}\n\nexport default VaastFixationPlugin;\n"],"names":["ParameterType"],"mappings":";;;EAEE,IAAW,OAAA,GAAA,OAAA;;ECEb,MAAM,IAAc,GAAA;EAAA,EAClB,IAAM,EAAA,gBAAA;EAAA,EACN,OAAA;EAAA,EACA,UAAY,EAAA;EAAA;EAAA;EAAA;EAAA,IAIV,QAAU,EAAA;EAAA,MACR,MAAMA,qBAAc,CAAA,MAAA;EAAA,MACpB,OAAS,EAAA,GAAA;EAAA,KACX;EAAA;EAAA;EAAA;EAAA,IAIA,SAAW,EAAA;EAAA,MACT,MAAMA,qBAAc,CAAA,GAAA;EAAA,MACpB,OAAS,EAAA,GAAA;EAAA,KACX;EAAA;EAAA;EAAA;EAAA,IAIA,YAAc,EAAA;EAAA,MACZ,MAAMA,qBAAc,CAAA,GAAA;EAAA,MACpB,OAAS,EAAA,GAAA;EAAA,KACX;EAAA;EAAA;EAAA;EAAA,IAIA,YAAc,EAAA;EAAA,MACZ,MAAMA,qBAAc,CAAA,GAAA;EAAA,MACpB,OAAS,EAAA,GAAA;EAAA,KACX;EAAA;EAAA;EAAA;EAAA,IAIA,iBAAmB,EAAA;EAAA,MACjB,MAAMA,qBAAc,CAAA,KAAA;EAAA,MACpB,KAAO,EAAA,IAAA;EAAA,MACP,OAAS,EAAA,KAAA,CAAA;EAAA,KACX;EAAA;EAAA;EAAA;EAAA,IAIA,QAAU,EAAA;EAAA,MACR,MAAMA,qBAAc,CAAA,GAAA;EAAA,MACpB,OAAS,EAAA,CAAA;EAAA,KACX;EAAA,GACF;EAAA,EACA,IAAM,EAAA;EAAA;EAAA;EAAA;EAAA,IAIJ,QAAU,EAAA;EAAA,MACR,MAAMA,qBAAc,CAAA,GAAA;EAAA,KACtB;EAAA,GACF;EAAA;EAEF,CAAA,CAAA;EAcA,MAAM,mBAAmD,CAAA;EAAA,EAGvD,YAAoB,OAAkB,EAAA;EAAlB,IAAA,IAAA,CAAA,OAAA,GAAA,OAAA,CAAA;EAAA,GAAmB;EAAA,EAFvC;EAAA,IAAA,IAAA,CAAO,IAAO,GAAA,IAAA,CAAA;EAAA,GAAA;EAAA,EAId,KAAA,CAAM,iBAA8B,KAAwB,EAAA;EAE1D,IAAM,MAAA,YAAA,GAAe,MAAM,YAAgB,IAAA,GAAA,CAAA;EAC3C,IAAM,MAAA,YAAA,GAAe,MAAM,YAAgB,IAAA,GAAA,CAAA;EAC3C,IAAA,MAAM,iBAAiB,YAAe,GAAA,YAAA,CAAA;EACtC,IAAA,MAAM,aAAgB,GAAA,IAAA,CAAK,MAAO,EAAA,GAAI,cAAiB,GAAA,YAAA,CAAA;EAGvD,IAAA,IAAI,QAAW,GAAA,EAAA,CAAA;EAEf,IAAM,MAAA,QAAA,GAAW,MAAM,QAAY,IAAA,CAAA,CAAA;EAEnC,IAAA,QAAA,IACE,+FACA,GAAA,KAAA,CAAM,iBAAkB,CAAA,QAAQ,CAChC,GAAA,oEAAA,CAAA;EACF,IAAA,QAAA,IACE,gIACA,GAAA,KAAA,CAAM,SACN,GAAA,8BAAA,GACA,MAAM,QACN,GAAA,QAAA,CAAA;EAEF,IAAA,eAAA,CAAgB,SAAY,GAAA,QAAA,CAAA;EAG5B,IAAA,MAAM,YAAY,MAAM;EAEtB,MAAA,IAAI,UAAa,GAAA;EAAA,QACf,QAAU,EAAA,aAAA;EAAA,OACZ,CAAA;EAGA,MAAK,IAAA,CAAA,OAAA,CAAQ,YAAY,UAAU,CAAA,CAAA;EAAA,KACrC,CAAA;EAGA,IAAK,IAAA,CAAA,OAAA,CAAQ,SAAU,CAAA,UAAA,CAAW,WAAY;EAC5C,MAAU,SAAA,EAAA,CAAA;EAAA,OACT,aAAa,CAAA,CAAA;EAAA,GAClB;EACF;;;;;;;;"}